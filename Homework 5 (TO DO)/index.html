<!DOCTYPE html>
<html>
<head>
  <title>JS_Homework_5</title>
  
</head>
<body>
  
  <script type="text/javascript">

      
    
      //creating Car as a class
      var Car = class Car
      {
        constructor(id, brand, model, producingYear, color, price, registerNumber){
          this.id = id;
          this.model = model;
          this.brand = brand;
          this.producingYear = producingYear;
          this.color = color;
          this.price = price;
          this.registerNumber = registerNumber;
        }
      }

      //creating car objects
      var car1 = new Car(1, "BMW", "X5", 2016, "Black", "80000 USD", "HD231I"),
          car2 = new Car(2, "Toyota", "Corola", 2002, "Green", "20000 USD","OP761I"),
          car3 = new Car(3, "Honda", "T3", 1998, "White",  "10000 USD", "LM-76DI"),
          car4 = new Car(4, "BMW", "X5", 2002, "Brown",  "15000 USD", "HB-23DI"),
          car5 = new Car(5, "BMW", "X6", 2019, "RED",  "80000 USD", "OP-90JK"),
          car6 = new Car(6, "Honda", "T3", 2010, "Yellow", "30000 USD","620-KMP"),
          car7 = new Car(7, "Toyota", "Corola", 2019, "Green", "40000 USD","SFIR76I");


      try {

        if(typeof car1.id !== "number"){
          throw new SyntaxError("Ошибка в данных");
        }

      } catch(e) {
        if(e.name == "SyntaxError"){
          console.log( "Sorry, there is an error");
        }else{
          throw e;
        }
      }
      
      //creating an arrya with the objects above
      var arraOfObjectts = [];

      //adding cars to the array
      arraOfObjectts.push(car1, car2, car3, car4, car5, car6, car7);

     

      // getCarsByBrand(arraOfObjectts, "BMW");
      // getCarsByModelAndYear(arraOfObjectts,"T3",20)
      // getCarsByProducingYearAndPrice(arraOfObjectts, 2019, "1000 USD");


      function getCarsByBrand(arrayOfCars, brandName) {
        console.log("  getCarsByBrand function:");
        for(let key in arraOfObjectts){

          if(arrayOfCars[key].brand === brandName){
            console.log(arrayOfCars[key]);
          };
        }

      }

      function getCarsByModelAndYear(arrayOfCars, model, RequestedbeingUsedYears) {
          console.log("  getCarsByModelAndYear function:")
        for(let key in arrayOfCars){
          //getting cars by model
          if(arrayOfCars[key].model === model){
            //getting cars by a number of years they are being used
            if(typeof RequestedbeingUsedYears === "number"){

              let currentYear = new Date().getFullYear(),
                  beingUsedYear = currentYear - arrayOfCars[key].producingYear;

                  if(RequestedbeingUsedYears > beingUsedYear){
                    console.log(arrayOfCars[key]);
                  };    
            };
          };
        };
      }

      function getCarsByProducingYearAndPrice (arrayOfCars, requestedProducingYear, reuquestedPrice){
        console.log("  getCarsByProducingYearAndPrice function:");
        for(let key in arrayOfCars){
          if(arrayOfCars[key].producingYear === requestedProducingYear){
            //getting prices as numbers
            let price = parseInt(arrayOfCars[key].price.slice(0,-4)),
                neededPrice = parseInt(reuquestedPrice.slice(0,-4));

                if(neededPrice < price){
                  console.log(arrayOfCars[key]);
                }
          }
        }
      }


  </script>


</body>
</html>